# 3. 객체 꾸미기 - 데코레이터 패턴

- "상속맨, 디자인에 눈을 뜨다"

  - 상속을 남용하는 사례를 살펴보고
  - 객체 작성이라는 형식으로 실행 중에 클래스를 꾸미는(데코레이션하는) 방법을 배웁니다
  - 데코레이터 패턴을 배우면 기존 클래스 코드를 바꾸지 않고도 객체에 새로운 임무를 추가할 수 있습니다

- 서브 클래스 -> 실행 중에 확장이 어려움

## 초대형 커피 전문점, 스타버즈

- 주문 시스템 개선

#### 주문 시스템

```ts
abstract class Beverage {
  protected description: string;
  constructor() {}

  // description 값 반환
  getDEscription() {
    return this.description;
  }

  // 추상 메소드, 서브 클래스에서 이 메소드를 구현해서 새로 정의해야 함
  abstract cost(): number;
}
```

- 고객은 커피를 주문할 때 우유, 두유, 모카(초콜릿)을 추가하고 그 위에 휘핑크림을 얹기도 합니다
- 각 경우마다 서브클래스를 만들면 클래스가 '폭발', 너무 많아짐

#### 뇌단련

- 만약 우유 가격이 인상 되면?
- 캐러멜을 새로 추가하면?
- 클래스 관리를 생각해 볼 때, 지금까지 우리가 배웠던 디자인 원칙 가운데 무엇을 제대로 지키지 않고 있는 걸까요? (2가지)
  - 나) 상속보다는 구성을 활용한다
  - 나) 구현보다는 인터페이스에 맞춰서 프로그래밍한다

#### 지금까지 배운 디자인 원칙

- 바뀌는 부분은 캡슐화한다
- 상속보다는 구성을 활용한다
- 구현보다는 인터페이스에 맞춰서 프로그래밍한다
- 상호작용하는 객체 사이에서는 가능하면 느슨한 결합을 사용해야 한다

### 슈퍼 클래스 상속을 써서 첨가물 관리 예

- A) 클래스가 5개 밖에 안되잖아?
- B) 난 아직 확신이 서지 않는데..
  - 나중에 이 디자인이 어떻게 바뀔지 생각해보면 이 접근법의 문제점을 발견할 수 있을지도 몰라

### 쓰면서 제대로 공부하기

#### 이 프로젝트에서 변경되었을 때 디자인에 영향을 미칠만한 요소를 적어봅시다

- 첨가물 가격이 바뀔 때 마다 기존 코드를 수정해야 합니다
- 첨가물의 종류가 많아지면 새로운 메소드를 추가해야 하고, 슈퍼클래스의 cost() 메소드도 수정해야 합니다
- 새로운 음료가 출시될 수도 있습니다.
  - 그 중에선 특정 첨가물이 들어가면 안되는 음료도 있을 것입니다
  - 예를 들어 아이스 티를 생각해보면, Tea 서브 클래스에서도 hasWhip() 같은 메소드가 여전히 상속 받게 될 것입니다
    - 이건 꽤 심각한 문제입니다 !!
- 고객이 더블 모카를 주문하면 어떻게 해야 할까요?
